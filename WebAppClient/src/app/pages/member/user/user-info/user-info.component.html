<div class="mat-elevation-z4 p-3" style="background: white">
  <h2>User Profile</h2>
  <app-querying-content-hider [querying]="querying" queryingAction="Updating user profile">
    <form (submit)="$event.preventDefault();  editInformation();" [formGroup]="userInformationForm">
      <div class="d-flex align-items-center flex-wrap justify-content-center">
        <div class="mx-5">
          <div (click)="uploadAvatar()" style="position: relative; display: inline-block">
            <img [src]="auth.loggedInUserAvatarPath" alt=""
                 class="p-1 cc-avatar" style="height: 200px; width: 200px; opacity: 0.5; cursor: pointer">
            <mat-icon
              style="position:absolute;top: 50%;left: 50%;opacity:0.8; cursor: pointer;
                  transform: translate(-50%,-50%); height: 100px; width: 100px; z-index: 1; font-size: 100px">
              cloud_upload
            </mat-icon>
          </div>
        </div>
        <div class="flex-grow-1 flex-shrink-1" style="min-width: 250px">

          <mat-form-field class="w-100">
            <input formControlName="username" matInput placeholder="Username" readonly>
          </mat-form-field>

          <mat-form-field class="w-100">
            <input formControlName="displayName" matInput placeholder="Display Name" required>
            <mat-error *ngIf="userInformationForm.get('displayName').invalid">
              Display name is required and between 2~20 characters.
            </mat-error>
          </mat-form-field>

          <mat-form-field class="w-100">
            <input formControlName="email" matInput placeholder="Email" readonly>
            <mat-error *ngIf="userInformationForm.get('email').hasError('required')"> Email is required.</mat-error>
            <mat-error *ngIf="userInformationForm.get('email').hasError('email')"> Format is incorret.</mat-error>
          </mat-form-field>
        </div>
      </div>


      <mat-card class="mb-3">
        <mat-checkbox formControlName="changePassword">Change password</mat-checkbox>
        <div *ngIf="userInformationForm.value.changePassword">
          <mat-form-field class="w-100">
            <input formControlName="newPassword" matInput placeholder="New password"
                   type="password">
            <mat-error *ngIf="userInformationForm.get('newPassword').invalid">
              Password must between 8 ~ 60 characters.
            </mat-error>
          </mat-form-field>

          <mat-form-field class="w-100">
            <input formControlName="newPasswordConfirm" matInput placeholder="New password confirm"
                   type="password">
            <mat-error *ngIf="userInformationForm.get('newPasswordConfirm').invalid">
              Password not match
            </mat-error>
          </mat-form-field>

          <mat-form-field class="w-100">
            <input formControlName="currentPassword" matInput placeholder="Current Password"
                   type="password">
            <mat-error *ngIf="userInformationForm.get('currentPassword').invalid">
              Current Password is required
            </mat-error>
          </mat-form-field>
        </div>
      </mat-card>
      <button color="primary" mat-raised-button>EDIT</button>
    </form>

  </app-querying-content-hider>
</div>
